#!/bin/bash

# Self-extracting JavaScript file generator
# This script will recreate the original JavaScript file

set -e

# Get the original filename from the script name
SCRIPT_NAME="$(basename "$0")"
OUTPUT_FILE="${SCRIPT_NAME%.*}.js"

# Auto-overwrite if file exists (no prompt)
if [ -f "$OUTPUT_FILE" ]; then
    echo "Overwriting existing file: $OUTPUT_FILE"
fi

# Find where the embedded data starts
# Look for the base64 data after the marker
SCRIPT_END_MARKER="#===BEGIN_BASE64_DATA==="

# Get the line number of the marker
MARKER_LINE=$(grep -n "^${SCRIPT_END_MARKER}$" "$0" | cut -d: -f1)

if [ -z "$MARKER_LINE" ]; then
    echo "Error: Could not find embedded data marker" >&2
    exit 1
fi

# Extract the base64 data (starts after the marker)
DATA_START_LINE=$((MARKER_LINE + 1))

# Get all lines from the data start to end of file
# and decode from base64
tail -n +"${DATA_START_LINE}" "$0" | base64 --decode > "$OUTPUT_FILE"

# Verify extraction
if [ $? -eq 0 ]; then
    echo "Successfully created: $OUTPUT_FILE"
    echo "Size: $(wc -c < "$OUTPUT_FILE") bytes"
    
    # Make executable if it starts with shebang
    if head -n1 "$OUTPUT_FILE" | grep -q "^#!"; then
        chmod +x "$OUTPUT_FILE"
        echo "Made executable (has shebang)"
    fi
else
    echo "Error: Failed to extract JavaScript file" >&2
    exit 1
fi

exit 0

#===BEGIN_BASE64_DATA===
LyoqCiAqIEpBVkFTQ1JJUFQgQ09SRSBTWU5UQVggVEVTVCBTVUlURSAtIExFVkVMIDEKICogVGVz
dGluZyBmdW5kYW1lbnRhbCBsYW5ndWFnZSBjb25zdHJ1Y3RzIGFuZCBzdGF0ZW1lbnRzCiAqLwoK
Ly8gPT09PT09PT09PSBURVNUIFJVTk5FUiA9PT09PT09PT09CmNsYXNzIFN5bnRheFRlc3Qgewog
ICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgdGhpcy50ZXN0cyA9IG5ldyBNYXAoKTsKICAgICAg
ICB0aGlzLnJlc3VsdHMgPSB7IHBhc3NlZDogMCwgZmFpbGVkOiAwIH07CiAgICAgICAgdGhpcy5j
dXJyZW50U2VjdGlvbiA9ICcnOwogICAgfQoKICAgIHNlY3Rpb24obmFtZSkgewogICAgICAgIHRo
aXMuY3VycmVudFNlY3Rpb24gPSBuYW1lOwogICAgICAgIHRoaXMudGVzdHMuc2V0KG5hbWUsIFtd
KTsKICAgICAgICBjb25zb2xlLmxvZyhgXG7wn5OBICR7bmFtZS50b1VwcGVyQ2FzZSgpfWApOwog
ICAgICAgIGNvbnNvbGUubG9nKCfilZAnLnJlcGVhdChuYW1lLmxlbmd0aCArIDIpKTsKICAgIH0K
CiAgICB0ZXN0KGRlc2NyaXB0aW9uLCB0ZXN0Rm4pIHsKICAgICAgICBjb25zdCB0ZXN0T2JqID0g
eyBkZXNjcmlwdGlvbiwgZm46IHRlc3RGbiB9OwogICAgICAgIHRoaXMudGVzdHMuZ2V0KHRoaXMu
Y3VycmVudFNlY3Rpb24pLnB1c2godGVzdE9iaik7CiAgICB9CgogICAgcnVuKCkgewogICAgICAg
IGNvbnNvbGUubG9nKCfwn6eqIEpBVkFTQ1JJUFQgQ09SRSBTWU5UQVggVEVTVCBTVUlURScpOwog
ICAgICAgIGNvbnNvbGUubG9nKCc9Jy5yZXBlYXQoNDApKTsKCiAgICAgICAgZm9yIChjb25zdCBb
c2VjdGlvbiwgc2VjdGlvblRlc3RzXSBvZiB0aGlzLnRlc3RzKSB7CiAgICAgICAgICAgIGNvbnNv
bGUubG9nKGBcbvCfk4IgVGVzdGluZzogJHtzZWN0aW9ufWApOwogICAgICAgICAgICAKICAgICAg
ICAgICAgZm9yIChjb25zdCB0ZXN0IG9mIHNlY3Rpb25UZXN0cykgewogICAgICAgICAgICAgICAg
dHJ5IHsKICAgICAgICAgICAgICAgICAgICB0ZXN0LmZuKCk7CiAgICAgICAgICAgICAgICAgICAg
Y29uc29sZS5sb2coYCAg4pyFICR7dGVzdC5kZXNjcmlwdGlvbn1gKTsKICAgICAgICAgICAgICAg
ICAgICB0aGlzLnJlc3VsdHMucGFzc2VkKys7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJv
cikgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAgIOKdjCAke3Rlc3QuZGVzY3Jp
cHRpb259YCk7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYCAgICAgJHtlcnJvci5t
ZXNzYWdlfWApOwogICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0cy5mYWlsZWQrKzsKICAg
ICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdGhpcy5yZXBv
cnQoKTsKICAgIH0KCiAgICByZXBvcnQoKSB7CiAgICAgICAgY29uc29sZS5sb2coJ1xuJyArICc9
Jy5yZXBlYXQoNDApKTsKICAgICAgICBjb25zb2xlLmxvZygn8J+TiiBGSU5BTCBSRVNVTFRTOicp
OwogICAgICAgIGNvbnNvbGUubG9nKGDinIUgUGFzc2VkOiAke3RoaXMucmVzdWx0cy5wYXNzZWR9
YCk7CiAgICAgICAgY29uc29sZS5sb2coYOKdjCBGYWlsZWQ6ICR7dGhpcy5yZXN1bHRzLmZhaWxl
ZH1gKTsKICAgICAgICBjb25zb2xlLmxvZyhg8J+TiCBUb3RhbDogJHt0aGlzLnJlc3VsdHMucGFz
c2VkICsgdGhpcy5yZXN1bHRzLmZhaWxlZH1gKTsKICAgICAgICBjb25zb2xlLmxvZygnPScucmVw
ZWF0KDQwKSk7CiAgICB9CgogICAgYXNzZXJ0KGNvbmRpdGlvbiwgbWVzc2FnZSkgewogICAgICAg
IGlmICghY29uZGl0aW9uKSB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7CiAgICB9Cn0KCmNvbnN0
IHRlc3RlciA9IG5ldyBTeW50YXhUZXN0KCk7CgovLyA9PT09PT09PT09IDEuIFZBUklBQkxFIERF
Q0xBUkFUSU9OUyA9PT09PT09PT09CnRlc3Rlci5zZWN0aW9uKCd2YXJpYWJsZSBkZWNsYXJhdGlv
bnMnKTsKCnRlc3Rlci50ZXN0KCd2YXIgZGVjbGFyYXRpb24gYW5kIGhvaXN0aW5nJywgKCkgPT4g
ewogICAgdGVzdGVyLmFzc2VydCh0eXBlb2YgeCA9PT0gJ3VuZGVmaW5lZCcsICd2YXIgaXMgaG9p
c3RlZCBidXQgbm90IGluaXRpYWxpemVkJyk7CiAgICB2YXIgeCA9IDEwOwogICAgdGVzdGVyLmFz
c2VydCh4ID09PSAxMCwgJ3ZhciBjYW4gYmUgcmVhc3NpZ25lZCcpOwp9KTsKCnRlc3Rlci50ZXN0
KCdsZXQgYmxvY2sgc2NvcGluZycsICgpID0+IHsKICAgIGlmICh0cnVlKSB7CiAgICAgICAgbGV0
IHkgPSAyMDsKICAgICAgICB0ZXN0ZXIuYXNzZXJ0KHkgPT09IDIwLCAnbGV0IHdvcmtzIGluIGJs
b2NrIHNjb3BlJyk7CiAgICB9CiAgICB0ZXN0ZXIuYXNzZXJ0KHR5cGVvZiB5ID09PSAndW5kZWZp
bmVkJywgJ2xldCBpcyBub3QgYWNjZXNzaWJsZSBvdXRzaWRlIGJsb2NrJyk7Cn0pOwoKdGVzdGVy
LnRlc3QoJ2NvbnN0IGltbXV0YWJpbGl0eScsICgpID0+IHsKICAgIGNvbnN0IHogPSAzMDsKICAg
IHRlc3Rlci5hc3NlcnQoeiA9PT0gMzAsICdjb25zdCBtdXN0IGJlIGluaXRpYWxpemVkJyk7CiAg
ICAKICAgIGNvbnN0IG9iaiA9IHsgYTogMSB9OwogICAgb2JqLmEgPSAyOyAvLyBBbGxvd2VkIC0g
bXV0YXRpbmcgb2JqZWN0IHByb3BlcnR5CiAgICB0ZXN0ZXIuYXNzZXJ0KG9iai5hID09PSAyLCAn
Y29uc3Qgb25seSBwcmV2ZW50cyByZWFzc2lnbm1lbnQsIG5vdCBtdXRhdGlvbicpOwp9KTsKCi8v
ID09PT09PT09PT0gMi4gUFJJTUlUSVZFIFRZUEVTID09PT09PT09PT0KdGVzdGVyLnNlY3Rpb24o
J3ByaW1pdGl2ZSB0eXBlcycpOwoKdGVzdGVyLnRlc3QoJ251bWJlciBvcGVyYXRpb25zJywgKCkg
PT4gewogICAgdGVzdGVyLmFzc2VydCh0eXBlb2YgNDIgPT09ICdudW1iZXInKTsKICAgIHRlc3Rl
ci5hc3NlcnQodHlwZW9mIDMuMTQgPT09ICdudW1iZXInKTsKICAgIHRlc3Rlci5hc3NlcnQodHlw
ZW9mIE5hTiA9PT0gJ251bWJlcicpOwogICAgdGVzdGVyLmFzc2VydCh0eXBlb2YgSW5maW5pdHkg
PT09ICdudW1iZXInKTsKICAgIAogICAgLy8gU3BlY2lhbCBudW1iZXIgYmVoYXZpb3JzCiAgICB0
ZXN0ZXIuYXNzZXJ0KDAuMSArIDAuMiAhPT0gMC4zLCAnZmxvYXRpbmcgcG9pbnQgcHJlY2lzaW9u
IGlzc3VlJyk7CiAgICB0ZXN0ZXIuYXNzZXJ0KGlzTmFOKE51bWJlcignYWJjJykpLCAncGFyc2lu
ZyBub24tbnVtZXJpYyBzdHJpbmcnKTsKfSk7Cgp0ZXN0ZXIudGVzdCgnc3RyaW5nIG9wZXJhdGlv
bnMnLCAoKSA9PiB7CiAgICBjb25zdCBzdHIgPSAnSmF2YVNjcmlwdCc7CiAgICB0ZXN0ZXIuYXNz
ZXJ0KHN0ci5sZW5ndGggPT09IDEwKTsKICAgIHRlc3Rlci5hc3NlcnQoc3RyWzBdID09PSAnSicp
OwogICAgdGVzdGVyLmFzc2VydChzdHIuc2xpY2UoMCwgNCkgPT09ICdKYXZhJyk7CiAgICB0ZXN0
ZXIuYXNzZXJ0KCd0ZXN0Jy50b1VwcGVyQ2FzZSgpID09PSAnVEVTVCcpOwp9KTsKCnRlc3Rlci50
ZXN0KCdib29sZWFuIGxvZ2ljJywgKCkgPT4gewogICAgdGVzdGVyLmFzc2VydCh0cnVlID09PSB0
cnVlKTsKICAgIHRlc3Rlci5hc3NlcnQoZmFsc2UgPT09IGZhbHNlKTsKICAgIHRlc3Rlci5hc3Nl
cnQoIXRydWUgPT09IGZhbHNlKTsKICAgIHRlc3Rlci5hc3NlcnQoISEndHJ1dGh5JyA9PT0gdHJ1
ZSk7CiAgICB0ZXN0ZXIuYXNzZXJ0KCEhMCA9PT0gZmFsc2UpOwogICAgdGVzdGVyLmFzc2VydCgh
IScnID09PSBmYWxzZSk7CiAgICB0ZXN0ZXIuYXNzZXJ0KCEhbnVsbCA9PT0gZmFsc2UpOwogICAg
dGVzdGVyLmFzc2VydCghIXVuZGVmaW5lZCA9PT0gZmFsc2UpOwp9KTsKCnRlc3Rlci50ZXN0KCdu
dWxsIGFuZCB1bmRlZmluZWQnLCAoKSA9PiB7CiAgICB0ZXN0ZXIuYXNzZXJ0KHR5cGVvZiB1bmRl
ZmluZWQgPT09ICd1bmRlZmluZWQnKTsKICAgIHRlc3Rlci5hc3NlcnQodHlwZW9mIG51bGwgPT09
ICdvYmplY3QnKTsKICAgIHRlc3Rlci5hc3NlcnQobnVsbCA9PSB1bmRlZmluZWQpOyAvLyB0cnVl
IHdpdGggbG9vc2UgZXF1YWxpdHkKICAgIHRlc3Rlci5hc3NlcnQobnVsbCAhPT0gdW5kZWZpbmVk
KTsgLy8gZmFsc2Ugd2l0aCBzdHJpY3QgZXF1YWxpdHkKICAgIHRlc3Rlci5hc3NlcnQoIW51bGwg
PT09IHRydWUpOwogICAgdGVzdGVyLmFzc2VydCghdW5kZWZpbmVkID09PSB0cnVlKTsKfSk7Cgov
LyA9PT09PT09PT09IDMuIE9QRVJBVE9SUyA9PT09PT09PT09CnRlc3Rlci5zZWN0aW9uKCdvcGVy
YXRvcnMnKTsKCnRlc3Rlci50ZXN0KCdhcml0aG1ldGljIG9wZXJhdG9ycycsICgpID0+IHsKICAg
IHRlc3Rlci5hc3NlcnQoMTAgKyA1ID09PSAxNSk7CiAgICB0ZXN0ZXIuYXNzZXJ0KDEwIC0gNSA9
PT0gNSk7CiAgICB0ZXN0ZXIuYXNzZXJ0KDEwICogNSA9PT0gNTApOwogICAgdGVzdGVyLmFzc2Vy
dCgxMCAvIDUgPT09IDIpOwogICAgdGVzdGVyLmFzc2VydCgxMCAlIDMgPT09IDEpOwogICAgdGVz
dGVyLmFzc2VydCgyICoqIDMgPT09IDgpOyAvLyBleHBvbmVudGlhdGlvbgogICAgCiAgICAvLyBJ
bmNyZW1lbnQvZGVjcmVtZW50CiAgICBsZXQgY291bnRlciA9IDU7CiAgICBjb3VudGVyKys7CiAg
ICB0ZXN0ZXIuYXNzZXJ0KGNvdW50ZXIgPT09IDYpOwogICAgY291bnRlci0tOwogICAgdGVzdGVy
LmFzc2VydChjb3VudGVyID09PSA1KTsKfSk7Cgp0ZXN0ZXIudGVzdCgnY29tcGFyaXNvbiBvcGVy
YXRvcnMnLCAoKSA9PiB7CiAgICAvLyBTdHJpY3QgZXF1YWxpdHkKICAgIHRlc3Rlci5hc3NlcnQo
NSA9PT0gNSk7CiAgICB0ZXN0ZXIuYXNzZXJ0KCc1JyAhPT0gNSk7CiAgICAKICAgIC8vIExvb3Nl
IGVxdWFsaXR5CiAgICB0ZXN0ZXIuYXNzZXJ0KCc1JyA9PSA1KTsKICAgIHRlc3Rlci5hc3NlcnQo
bnVsbCA9PSB1bmRlZmluZWQpOwogICAgCiAgICAvLyBSZWxhdGlvbmFsCiAgICB0ZXN0ZXIuYXNz
ZXJ0KDUgPiAzKTsKICAgIHRlc3Rlci5hc3NlcnQoNSA+PSA1KTsKICAgIHRlc3Rlci5hc3NlcnQo
MyA8IDUpOwogICAgdGVzdGVyLmFzc2VydCg1IDw9IDUpOwp9KTsKCnRlc3Rlci50ZXN0KCdsb2dp
Y2FsIG9wZXJhdG9ycycsICgpID0+IHsKICAgIC8vIEFORCByZXR1cm5zIGZpcnN0IGZhbHN5IG9y
IGxhc3QgdHJ1dGh5CiAgICB0ZXN0ZXIuYXNzZXJ0KCh0cnVlICYmIGZhbHNlKSA9PT0gZmFsc2Up
OwogICAgdGVzdGVyLmFzc2VydCgoMSAmJiAyICYmIDMpID09PSAzKTsKICAgIHRlc3Rlci5hc3Nl
cnQoKDAgJiYgMikgPT09IDApOwogICAgCiAgICAvLyBPUiByZXR1cm5zIGZpcnN0IHRydXRoeSBv
ciBsYXN0IGZhbHN5CiAgICB0ZXN0ZXIuYXNzZXJ0KCh0cnVlIHx8IGZhbHNlKSA9PT0gdHJ1ZSk7
CiAgICB0ZXN0ZXIuYXNzZXJ0KCgwIHx8IG51bGwgfHwgMykgPT09IDMpOwogICAgCiAgICAvLyBO
T1QKICAgIHRlc3Rlci5hc3NlcnQoIXRydWUgPT09IGZhbHNlKTsKICAgIHRlc3Rlci5hc3NlcnQo
ISEndGVzdCcgPT09IHRydWUpOwp9KTsKCnRlc3Rlci50ZXN0KCdhc3NpZ25tZW50IG9wZXJhdG9y
cycsICgpID0+IHsKICAgIGxldCB4ID0gMTA7CiAgICB4ICs9IDU7IHRlc3Rlci5hc3NlcnQoeCA9
PT0gMTUpOwogICAgeCAtPSAzOyB0ZXN0ZXIuYXNzZXJ0KHggPT09IDEyKTsKICAgIHggKj0gMjsg
dGVzdGVyLmFzc2VydCh4ID09PSAyNCk7CiAgICB4IC89IDQ7IHRlc3Rlci5hc3NlcnQoeCA9PT0g
Nik7CiAgICB4ICU9IDQ7IHRlc3Rlci5hc3NlcnQoeCA9PT0gMik7Cn0pOwoKLy8gPT09PT09PT09
PSA0LiBDT05UUk9MIEZMT1cgPT09PT09PT09PQp0ZXN0ZXIuc2VjdGlvbignY29udHJvbCBmbG93
Jyk7Cgp0ZXN0ZXIudGVzdCgnaWYtZWxzZSBzdGF0ZW1lbnRzJywgKCkgPT4gewogICAgbGV0IHJl
c3VsdCA9ICcnOwogICAgCiAgICBpZiAodHJ1ZSkgcmVzdWx0ID0gJ3RydWUnOwogICAgdGVzdGVy
LmFzc2VydChyZXN1bHQgPT09ICd0cnVlJyk7CiAgICAKICAgIGlmIChmYWxzZSkgcmVzdWx0ID0g
J2ZhbHNlJzsKICAgIGVsc2UgcmVzdWx0ID0gJ2Vsc2UnOwogICAgdGVzdGVyLmFzc2VydChyZXN1
bHQgPT09ICdlbHNlJyk7CiAgICAKICAgIC8vIFRlcm5hcnkgb3BlcmF0b3IKICAgIGNvbnN0IHZh
bHVlID0gMTAgPiA1ID8gJ2dyZWF0ZXInIDogJ2xlc3MnOwogICAgdGVzdGVyLmFzc2VydCh2YWx1
ZSA9PT0gJ2dyZWF0ZXInKTsKfSk7Cgp0ZXN0ZXIudGVzdCgnc3dpdGNoIHN0YXRlbWVudCcsICgp
ID0+IHsKICAgIGxldCByZXN1bHQgPSAnJzsKICAgIAogICAgc3dpdGNoICgyICsgMikgewogICAg
ICAgIGNhc2UgMzoKICAgICAgICAgICAgcmVzdWx0ID0gJ3RocmVlJzsKICAgICAgICAgICAgYnJl
YWs7CiAgICAgICAgY2FzZSA0OgogICAgICAgICAgICByZXN1bHQgPSAnZm91cic7CiAgICAgICAg
ICAgIGJyZWFrOwogICAgICAgIGNhc2UgNToKICAgICAgICAgICAgcmVzdWx0ID0gJ2ZpdmUnOwog
ICAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZXN1bHQgPSAn
dW5rbm93bic7CiAgICB9CiAgICAKICAgIHRlc3Rlci5hc3NlcnQocmVzdWx0ID09PSAnZm91cicp
OwogICAgCiAgICAvLyBGYWxsLXRocm91Z2ggYmVoYXZpb3IKICAgIGxldCBjb3VudCA9IDA7CiAg
ICBzd2l0Y2ggKDEpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNvdW50Kys7CiAgICAg
ICAgICAgIC8vIE5vIGJyZWFrIC0gZmFsbCB0aHJvdWdoCiAgICAgICAgY2FzZSAyOgogICAgICAg
ICAgICBjb3VudCsrOwogICAgICAgICAgICAvLyBObyBicmVhayAtIGZhbGwgdGhyb3VnaAogICAg
ICAgIGNhc2UgMzoKICAgICAgICAgICAgY291bnQrKzsKICAgIH0KICAgIHRlc3Rlci5hc3NlcnQo
Y291bnQgPT09IDMpOwp9KTsKCnRlc3Rlci50ZXN0KCdsb29wcycsICgpID0+IHsKICAgIC8vIEZv
ciBsb29wCiAgICBsZXQgc3VtID0gMDsKICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDM7IGkrKykg
ewogICAgICAgIHN1bSArPSBpOwogICAgfQogICAgdGVzdGVyLmFzc2VydChzdW0gPT09IDYpOwog
ICAgCiAgICAvLyBXaGlsZSBsb29wCiAgICBsZXQgd2hpbGVDb3VudCA9IDM7CiAgICB3aGlsZSAo
d2hpbGVDb3VudCA+IDApIHsKICAgICAgICB3aGlsZUNvdW50LS07CiAgICB9CiAgICB0ZXN0ZXIu
YXNzZXJ0KHdoaWxlQ291bnQgPT09IDApOwogICAgCiAgICAvLyBEby13aGlsZSAoZXhlY3V0ZXMg
YXQgbGVhc3Qgb25jZSkKICAgIGxldCBkb0NvdW50ID0gMDsKICAgIGRvIHsKICAgICAgICBkb0Nv
dW50Kys7CiAgICB9IHdoaWxlIChmYWxzZSk7CiAgICB0ZXN0ZXIuYXNzZXJ0KGRvQ291bnQgPT09
IDEpOwogICAgCiAgICAvLyBGb3ItaW4gKG9iamVjdCBwcm9wZXJ0aWVzKQogICAgY29uc3Qgb2Jq
ID0geyBhOiAxLCBiOiAyIH07CiAgICBjb25zdCBrZXlzID0gW107CiAgICBmb3IgKGNvbnN0IGtl
eSBpbiBvYmopIHsKICAgICAgICBrZXlzLnB1c2goa2V5KTsKICAgIH0KICAgIHRlc3Rlci5hc3Nl
cnQoa2V5cy5sZW5ndGggPT09IDIpOwogICAgCiAgICAvLyBGb3Itb2YgKGl0ZXJhYmxlcykKICAg
IGNvbnN0IGFyciA9IFsxLCAyLCAzXTsKICAgIGNvbnN0IHZhbHVlcyA9IFtdOwogICAgZm9yIChj
b25zdCB2YWx1ZSBvZiBhcnIpIHsKICAgICAgICB2YWx1ZXMucHVzaCh2YWx1ZSk7CiAgICB9CiAg
ICB0ZXN0ZXIuYXNzZXJ0KHZhbHVlcy5sZW5ndGggPT09IDMpOwogICAgCiAgICAvLyBCcmVhayBh
bmQgY29udGludWUKICAgIGxldCBicmVha0NvdW50ID0gMDsKICAgIGZvciAobGV0IGkgPSAwOyBp
IDwgNTsgaSsrKSB7CiAgICAgICAgaWYgKGkgPT09IDMpIGJyZWFrOwogICAgICAgIGJyZWFrQ291
bnQrKzsKICAgIH0KICAgIHRlc3Rlci5hc3NlcnQoYnJlYWtDb3VudCA9PT0gMyk7CiAgICAKICAg
IGxldCBjb250aW51ZUNvdW50ID0gMDsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7
CiAgICAgICAgaWYgKGkgJSAyID09PSAwKSBjb250aW51ZTsKICAgICAgICBjb250aW51ZUNvdW50
Kys7CiAgICB9CiAgICB0ZXN0ZXIuYXNzZXJ0KGNvbnRpbnVlQ291bnQgPT09IDIpOwp9KTsKCi8v
ID09PT09PT09PT0gNS4gRlVOQ1RJT05TID09PT09PT09PT0KdGVzdGVyLnNlY3Rpb24oJ2Z1bmN0
aW9ucycpOwoKdGVzdGVyLnRlc3QoJ2Z1bmN0aW9uIGRlY2xhcmF0aW9ucycsICgpID0+IHsKICAg
IC8vIEZ1bmN0aW9uIGRlY2xhcmF0aW9uIChob2lzdGVkKQogICAgdGVzdGVyLmFzc2VydCh0eXBl
b2YgYWRkID09PSAnZnVuY3Rpb24nKTsKICAgIGZ1bmN0aW9uIGFkZChhLCBiKSB7IHJldHVybiBh
ICsgYjsgfQogICAgdGVzdGVyLmFzc2VydChhZGQoMiwgMykgPT09IDUpOwogICAgCiAgICAvLyBG
dW5jdGlvbiBleHByZXNzaW9uCiAgICBjb25zdCBtdWx0aXBseSA9IGZ1bmN0aW9uKGEsIGIpIHsg
cmV0dXJuIGEgKiBiOyB9OwogICAgdGVzdGVyLmFzc2VydChtdWx0aXBseSgzLCA0KSA9PT0gMTIp
OwogICAgCiAgICAvLyBBcnJvdyBmdW5jdGlvbgogICAgY29uc3Qgc3F1YXJlID0geCA9PiB4ICog
eDsKICAgIHRlc3Rlci5hc3NlcnQoc3F1YXJlKDUpID09PSAyNSk7CiAgICAKICAgIC8vIEFycm93
IGZ1bmN0aW9uIGxleGljYWwgdGhpcwogICAgY29uc3Qgb2JqID0gewogICAgICAgIHZhbHVlOiAx
MCwKICAgICAgICBnZXRWYWx1ZTogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnZhbHVlOyB9LAog
ICAgICAgIGdldEFycm93VmFsdWU6ICgpID0+IHRoaXMudmFsdWUKICAgIH07CiAgICB0ZXN0ZXIu
YXNzZXJ0KG9iai5nZXRWYWx1ZSgpID09PSAxMCk7Cn0pOwoKdGVzdGVyLnRlc3QoJ3BhcmFtZXRl
cnMgYW5kIGFyZ3VtZW50cycsICgpID0+IHsKICAgIC8vIERlZmF1bHQgcGFyYW1ldGVycwogICAg
ZnVuY3Rpb24gZ3JlZXQobmFtZSA9ICdHdWVzdCcpIHsgcmV0dXJuIGBIZWxsbyAke25hbWV9YDsg
fQogICAgdGVzdGVyLmFzc2VydChncmVldCgnQWxpY2UnKSA9PT0gJ0hlbGxvIEFsaWNlJyk7CiAg
ICB0ZXN0ZXIuYXNzZXJ0KGdyZWV0KCkgPT09ICdIZWxsbyBHdWVzdCcpOwogICAgCiAgICAvLyBS
ZXN0IHBhcmFtZXRlcnMKICAgIGZ1bmN0aW9uIHN1bSguLi5udW1iZXJzKSB7CiAgICAgICAgcmV0
dXJuIG51bWJlcnMucmVkdWNlKChhY2MsIG51bSkgPT4gYWNjICsgbnVtLCAwKTsKICAgIH0KICAg
IHRlc3Rlci5hc3NlcnQoc3VtKDEsIDIsIDMsIDQpID09PSAxMCk7CiAgICAKICAgIC8vIEFyZ3Vt
ZW50cyBvYmplY3QgKGluIHJlZ3VsYXIgZnVuY3Rpb25zKQogICAgZnVuY3Rpb24gbGVnYWN5U3Vt
KCkgewogICAgICAgIGxldCB0b3RhbCA9IDA7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBh
cmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdG90YWwgKz0gYXJndW1lbnRzW2ld
OwogICAgICAgIH0KICAgICAgICByZXR1cm4gdG90YWw7CiAgICB9CiAgICB0ZXN0ZXIuYXNzZXJ0
KGxlZ2FjeVN1bSgxLCAyLCAzKSA9PT0gNik7Cn0pOwoKdGVzdGVyLnRlc3QoJ3Njb3BlIGFuZCBj
bG9zdXJlcycsICgpID0+IHsKICAgIC8vIEdsb2JhbCBzY29wZQogICAgZ2xvYmFsVmFyID0gJ2ds
b2JhbCc7CiAgICB0ZXN0ZXIuYXNzZXJ0KGdsb2JhbFZhciA9PT0gJ2dsb2JhbCcpOwogICAgCiAg
ICAvLyBGdW5jdGlvbiBzY29wZQogICAgZnVuY3Rpb24gb3V0ZXIoKSB7CiAgICAgICAgY29uc3Qg
b3V0ZXJWYXIgPSAnb3V0ZXInOwogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIGlubmVyKCkgewog
ICAgICAgICAgICBjb25zdCBpbm5lclZhciA9ICdpbm5lcic7CiAgICAgICAgICAgIHJldHVybiBv
dXRlclZhciArIGlubmVyVmFyOyAvLyBjbG9zdXJlIGNhcHR1cmVzIG91dGVyVmFyCiAgICAgICAg
fQogICAgICAgIAogICAgICAgIHJldHVybiBpbm5lcjsKICAgIH0KICAgIAogICAgY29uc3QgY2xv
c3VyZUZuID0gb3V0ZXIoKTsKICAgIHRlc3Rlci5hc3NlcnQoY2xvc3VyZUZuKCkgPT09ICdvdXRl
cmlubmVyJyk7Cn0pOwoKLy8gPT09PT09PT09PSA2LiBBUlJBWVMgPT09PT09PT09PQp0ZXN0ZXIu
c2VjdGlvbignYXJyYXlzJyk7Cgp0ZXN0ZXIudGVzdCgnYXJyYXkgYmFzaWNzJywgKCkgPT4gewog
ICAgY29uc3QgYXJyID0gWzEsIDIsIDNdOwogICAgdGVzdGVyLmFzc2VydChBcnJheS5pc0FycmF5
KGFycikpOwogICAgdGVzdGVyLmFzc2VydChhcnIubGVuZ3RoID09PSAzKTsKICAgIHRlc3Rlci5h
c3NlcnQoYXJyWzBdID09PSAxKTsKICAgIHRlc3Rlci5hc3NlcnQoYXJyW2Fyci5sZW5ndGggLSAx
XSA9PT0gMyk7Cn0pOwoKdGVzdGVyLnRlc3QoJ2FycmF5IG1ldGhvZHMnLCAoKSA9PiB7CiAgICBj
b25zdCBhcnIgPSBbMSwgMiwgM107CiAgICAKICAgIC8vIE11dGF0aW9uIG1ldGhvZHMKICAgIGFy
ci5wdXNoKDQpOyB0ZXN0ZXIuYXNzZXJ0KGFyci5sZW5ndGggPT09IDQpOwogICAgYXJyLnBvcCgp
OyB0ZXN0ZXIuYXNzZXJ0KGFyci5sZW5ndGggPT09IDMpOwogICAgYXJyLnVuc2hpZnQoMCk7IHRl
c3Rlci5hc3NlcnQoYXJyWzBdID09PSAwKTsKICAgIGFyci5zaGlmdCgpOyB0ZXN0ZXIuYXNzZXJ0
KGFyclswXSA9PT0gMSk7CiAgICAKICAgIC8vIE5vbi1tdXRhdGluZyBtZXRob2RzCiAgICBjb25z
dCBkb3VibGVkID0gYXJyLm1hcCh4ID0+IHggKiAyKTsKICAgIHRlc3Rlci5hc3NlcnQoZG91Ymxl
ZFswXSA9PT0gMik7CiAgICAKICAgIGNvbnN0IGZpbHRlcmVkID0gYXJyLmZpbHRlcih4ID0+IHgg
PiAxKTsKICAgIHRlc3Rlci5hc3NlcnQoZmlsdGVyZWQubGVuZ3RoID09PSAyKTsKICAgIAogICAg
Y29uc3QgcmVkdWNlZCA9IGFyci5yZWR1Y2UoKHN1bSwgeCkgPT4gc3VtICsgeCwgMCk7CiAgICB0
ZXN0ZXIuYXNzZXJ0KHJlZHVjZWQgPT09IDYpOwogICAgCiAgICAvLyBJdGVyYXRpb24gbWV0aG9k
cwogICAgY29uc3QgZm91bmQgPSBhcnIuZmluZCh4ID0+IHggPiAyKTsKICAgIHRlc3Rlci5hc3Nl
cnQoZm91bmQgPT09IDMpOwogICAgCiAgICBjb25zdCBoYXNUd28gPSBhcnIuaW5jbHVkZXMoMik7
CiAgICB0ZXN0ZXIuYXNzZXJ0KGhhc1R3byA9PT0gdHJ1ZSk7Cn0pOwoKdGVzdGVyLnRlc3QoJ2Fy
cmF5IGRlc3RydWN0dXJpbmcnLCAoKSA9PiB7CiAgICBjb25zdCBbZmlyc3QsIHNlY29uZCwgLi4u
cmVzdF0gPSBbMSwgMiwgMywgNCwgNV07CiAgICB0ZXN0ZXIuYXNzZXJ0KGZpcnN0ID09PSAxKTsK
ICAgIHRlc3Rlci5hc3NlcnQoc2Vjb25kID09PSAyKTsKICAgIHRlc3Rlci5hc3NlcnQocmVzdC5s
ZW5ndGggPT09IDMpOwogICAgCiAgICAvLyBTd2FwcGluZyB2YXJpYWJsZXMKICAgIGxldCBhID0g
MSwgYiA9IDI7CiAgICBbYSwgYl0gPSBbYiwgYV07CiAgICB0ZXN0ZXIuYXNzZXJ0KGEgPT09IDIp
OwogICAgdGVzdGVyLmFzc2VydChiID09PSAxKTsKfSk7CgovLyA9PT09PT09PT09IDcuIE9CSkVD
VFMgPT09PT09PT09PQp0ZXN0ZXIuc2VjdGlvbignb2JqZWN0cycpOwoKdGVzdGVyLnRlc3QoJ29i
amVjdCBiYXNpY3MnLCAoKSA9PiB7CiAgICBjb25zdCBvYmogPSB7CiAgICAgICAgbmFtZTogJ0pv
aG4nLAogICAgICAgIGFnZTogMzAsCiAgICAgICAgZ3JlZXQoKSB7IHJldHVybiBgSGVsbG8gJHt0
aGlzLm5hbWV9YDsgfQogICAgfTsKICAgIAogICAgdGVzdGVyLmFzc2VydChvYmoubmFtZSA9PT0g
J0pvaG4nKTsKICAgIHRlc3Rlci5hc3NlcnQob2JqWydhZ2UnXSA9PT0gMzApOwogICAgdGVzdGVy
LmFzc2VydChvYmouZ3JlZXQoKSA9PT0gJ0hlbGxvIEpvaG4nKTsKICAgIAogICAgLy8gUHJvcGVy
dHkgZXhpc3RlbmNlCiAgICB0ZXN0ZXIuYXNzZXJ0KCduYW1lJyBpbiBvYmopOwogICAgdGVzdGVy
LmFzc2VydChvYmouaGFzT3duUHJvcGVydHkoJ2FnZScpKTsKICAgIHRlc3Rlci5hc3NlcnQoIW9i
ai5oYXNPd25Qcm9wZXJ0eSgndG9TdHJpbmcnKSk7Cn0pOwoKdGVzdGVyLnRlc3QoJ29iamVjdCBt
YW5pcHVsYXRpb24nLCAoKSA9PiB7CiAgICBjb25zdCBvYmogPSB7IGE6IDEsIGI6IDIgfTsKICAg
IAogICAgLy8gQWRkaW5nIHByb3BlcnRpZXMKICAgIG9iai5jID0gMzsKICAgIHRlc3Rlci5hc3Nl
cnQob2JqLmMgPT09IDMpOwogICAgCiAgICAvLyBEZWxldGluZyBwcm9wZXJ0aWVzCiAgICBkZWxl
dGUgb2JqLmI7CiAgICB0ZXN0ZXIuYXNzZXJ0KCEoJ2InIGluIG9iaikpOwogICAgCiAgICAvLyBQ
cm9wZXJ0eSBkZXNjcmlwdG9ycwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgJ3JlYWRP
bmx5JywgewogICAgICAgIHZhbHVlOiA0MiwKICAgICAgICB3cml0YWJsZTogZmFsc2UsCiAgICAg
ICAgZW51bWVyYWJsZTogdHJ1ZQogICAgfSk7CiAgICAKICAgIG9iai5yZWFkT25seSA9IDEwMDsg
Ly8gV29uJ3QgY2hhbmdlCiAgICB0ZXN0ZXIuYXNzZXJ0KG9iai5yZWFkT25seSA9PT0gNDIpOwp9
KTsKCnRlc3Rlci50ZXN0KCdvYmplY3QgZGVzdHJ1Y3R1cmluZycsICgpID0+IHsKICAgIGNvbnN0
IHVzZXIgPSB7IG5hbWU6ICdBbGljZScsIGFnZTogMjUsIGNpdHk6ICdOWUMnIH07CiAgICAKICAg
IGNvbnN0IHsgbmFtZSwgYWdlIH0gPSB1c2VyOwogICAgdGVzdGVyLmFzc2VydChuYW1lID09PSAn
QWxpY2UnKTsKICAgIHRlc3Rlci5hc3NlcnQoYWdlID09PSAyNSk7CiAgICAKICAgIC8vIFdpdGgg
cmVuYW1pbmcKICAgIGNvbnN0IHsgbmFtZTogdXNlck5hbWUsIGNpdHk6IHVzZXJDaXR5IH0gPSB1
c2VyOwogICAgdGVzdGVyLmFzc2VydCh1c2VyTmFtZSA9PT0gJ0FsaWNlJyk7CiAgICB0ZXN0ZXIu
YXNzZXJ0KHVzZXJDaXR5ID09PSAnTllDJyk7CiAgICAKICAgIC8vIERlZmF1bHQgdmFsdWVzCiAg
ICBjb25zdCB7IGNvdW50cnkgPSAnVVNBJyB9ID0gdXNlcjsKICAgIHRlc3Rlci5hc3NlcnQoY291
bnRyeSA9PT0gJ1VTQScpOwp9KTsKCi8vID09PT09PT09PT0gOC4gRVJST1IgSEFORExJTkcgPT09
PT09PT09PQp0ZXN0ZXIuc2VjdGlvbignZXJyb3IgaGFuZGxpbmcnKTsKCnRlc3Rlci50ZXN0KCd0
cnktY2F0Y2gtZmluYWxseScsICgpID0+IHsKICAgIGxldCBmaW5hbGx5RXhlY3V0ZWQgPSBmYWxz
ZTsKICAgIGxldCBlcnJvckNhdWdodCA9IG51bGw7CiAgICAKICAgIHRyeSB7CiAgICAgICAgdGhy
b3cgbmV3IEVycm9yKCdUZXN0IGVycm9yJyk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAg
IGVycm9yQ2F1Z2h0ID0gZXJyb3IubWVzc2FnZTsKICAgIH0gZmluYWxseSB7CiAgICAgICAgZmlu
YWxseUV4ZWN1dGVkID0gdHJ1ZTsKICAgIH0KICAgIAogICAgdGVzdGVyLmFzc2VydChlcnJvckNh
dWdodCA9PT0gJ1Rlc3QgZXJyb3InKTsKICAgIHRlc3Rlci5hc3NlcnQoZmluYWxseUV4ZWN1dGVk
ID09PSB0cnVlKTsKfSk7Cgp0ZXN0ZXIudGVzdCgnZXJyb3IgdHlwZXMnLCAoKSA9PiB7CiAgICB0
cnkgewogICAgICAgIHVuZGVmaW5lZFZhcmlhYmxlOyAvLyBSZWZlcmVuY2VFcnJvcgogICAgfSBj
YXRjaCAoZXJyb3IpIHsKICAgICAgICB0ZXN0ZXIuYXNzZXJ0KGVycm9yIGluc3RhbmNlb2YgUmVm
ZXJlbmNlRXJyb3IpOwogICAgfQogICAgCiAgICB0cnkgewogICAgICAgIG51bGwuZigpOyAvLyBU
eXBlRXJyb3IKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGVzdGVyLmFzc2VydChlcnJv
ciBpbnN0YW5jZW9mIFR5cGVFcnJvcik7CiAgICB9CiAgICAKICAgIHRyeSB7CiAgICAgICAgZGVj
b2RlVVJJQ29tcG9uZW50KCclJyk7IC8vIFVSSUVycm9yCiAgICB9IGNhdGNoIChlcnJvcikgewog
ICAgICAgIHRlc3Rlci5hc3NlcnQoZXJyb3IgaW5zdGFuY2VvZiBVUklFcnJvcik7CiAgICB9CiAg
ICAKICAgIHRyeSB7CiAgICAgICAgSlNPTi5wYXJzZSgnaW52YWxpZCcpOyAvLyBTeW50YXhFcnJv
cgogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0ZXN0ZXIuYXNzZXJ0KGVycm9yIGluc3Rh
bmNlb2YgU3ludGF4RXJyb3IpOwogICAgfQp9KTsKCi8vID09PT09PT09PT0gOS4gVFlQRSBDT05W
RVJTSU9OID09PT09PT09PT0KdGVzdGVyLnNlY3Rpb24oJ3R5cGUgY29udmVyc2lvbicpOwoKdGVz
dGVyLnRlc3QoJ2V4cGxpY2l0IGNvbnZlcnNpb24nLCAoKSA9PiB7CiAgICAvLyBTdHJpbmcgY29u
dmVyc2lvbgogICAgdGVzdGVyLmFzc2VydChTdHJpbmcoMTIzKSA9PT0gJzEyMycpOwogICAgdGVz
dGVyLmFzc2VydChTdHJpbmcodHJ1ZSkgPT09ICd0cnVlJyk7CiAgICB0ZXN0ZXIuYXNzZXJ0KFN0
cmluZyhudWxsKSA9PT0gJ251bGwnKTsKICAgIHRlc3Rlci5hc3NlcnQoU3RyaW5nKHVuZGVmaW5l
ZCkgPT09ICd1bmRlZmluZWQnKTsKICAgIAogICAgLy8gTnVtYmVyIGNvbnZlcnNpb24KICAgIHRl
c3Rlci5hc3NlcnQoTnVtYmVyKCcxMjMnKSA9PT0gMTIzKTsKICAgIHRlc3Rlci5hc3NlcnQoTnVt
YmVyKCcxMjNhYmMnKSA9PT0gTmFOKTsKICAgIHRlc3Rlci5hc3NlcnQoTnVtYmVyKHRydWUpID09
PSAxKTsKICAgIHRlc3Rlci5hc3NlcnQoTnVtYmVyKGZhbHNlKSA9PT0gMCk7CiAgICB0ZXN0ZXIu
YXNzZXJ0KE51bWJlcihudWxsKSA9PT0gMCk7CiAgICB0ZXN0ZXIuYXNzZXJ0KE51bWJlcih1bmRl
ZmluZWQpID09PSBOYU4pOwogICAgCiAgICAvLyBCb29sZWFuIGNvbnZlcnNpb24KICAgIHRlc3Rl
ci5hc3NlcnQoQm9vbGVhbigxKSA9PT0gdHJ1ZSk7CiAgICB0ZXN0ZXIuYXNzZXJ0KEJvb2xlYW4o
MCkgPT09IGZhbHNlKTsKICAgIHRlc3Rlci5hc3NlcnQoQm9vbGVhbignJykgPT09IGZhbHNlKTsK
ICAgIHRlc3Rlci5hc3NlcnQoQm9vbGVhbigndGV4dCcpID09PSB0cnVlKTsKICAgIHRlc3Rlci5h
c3NlcnQoQm9vbGVhbihudWxsKSA9PT0gZmFsc2UpOwogICAgdGVzdGVyLmFzc2VydChCb29sZWFu
KHVuZGVmaW5lZCkgPT09IGZhbHNlKTsKICAgIHRlc3Rlci5hc3NlcnQoQm9vbGVhbih7fSkgPT09
IHRydWUpOwogICAgdGVzdGVyLmFzc2VydChCb29sZWFuKFtdKSA9PT0gdHJ1ZSk7Cn0pOwoKdGVz
dGVyLnRlc3QoJ2ltcGxpY2l0IGNvbnZlcnNpb24nLCAoKSA9PiB7CiAgICAvLyBMb29zZSBlcXVh
bGl0eQogICAgdGVzdGVyLmFzc2VydCgnNScgPT0gNSk7CiAgICB0ZXN0ZXIuYXNzZXJ0KHRydWUg
PT0gMSk7CiAgICB0ZXN0ZXIuYXNzZXJ0KGZhbHNlID09IDApOwogICAgdGVzdGVyLmFzc2VydChu
dWxsID09IHVuZGVmaW5lZCk7CiAgICAKICAgIC8vIEFkZGl0aW9uIHdpdGggc3RyaW5ncwogICAg
dGVzdGVyLmFzc2VydCgxICsgJzInID09PSAnMTInKTsKICAgIHRlc3Rlci5hc3NlcnQoJzMnICsg
NCArIDUgPT09ICczNDUnKTsKICAgIHRlc3Rlci5hc3NlcnQoMyArIDQgKyAnNScgPT09ICc3NScp
OwogICAgCiAgICAvLyBPdGhlciBvcGVyYXRvcnMKICAgIHRlc3Rlci5hc3NlcnQoJzUnIC0gMiA9
PT0gMyk7CiAgICB0ZXN0ZXIuYXNzZXJ0KCc1JyAqICcyJyA9PT0gMTApOwogICAgdGVzdGVyLmFz
c2VydCgnMTAnIC8gJzInID09PSA1KTsKfSk7CgovLyA9PT09PT09PT09IDEwLiBTUEVDSUFMIE9Q
RVJBVE9SUyA9PT09PT09PT09CnRlc3Rlci5zZWN0aW9uKCdzcGVjaWFsIG9wZXJhdG9ycycpOwoK
dGVzdGVyLnRlc3QoJ3R5cGVvZiBvcGVyYXRvcicsICgpID0+IHsKICAgIHRlc3Rlci5hc3NlcnQo
dHlwZW9mIDQyID09PSAnbnVtYmVyJyk7CiAgICB0ZXN0ZXIuYXNzZXJ0KHR5cGVvZiAndGV4dCcg
PT09ICdzdHJpbmcnKTsKICAgIHRlc3Rlci5hc3NlcnQodHlwZW9mIHRydWUgPT09ICdib29sZWFu
Jyk7CiAgICB0ZXN0ZXIuYXNzZXJ0KHR5cGVvZiB1bmRlZmluZWQgPT09ICd1bmRlZmluZWQnKTsK
ICAgIHRlc3Rlci5hc3NlcnQodHlwZW9mIG51bGwgPT09ICdvYmplY3QnKTsgLy8gS25vd24gcXVp
cmsKICAgIHRlc3Rlci5hc3NlcnQodHlwZW9mIHt9ID09PSAnb2JqZWN0Jyk7CiAgICB0ZXN0ZXIu
YXNzZXJ0KHR5cGVvZiBbXSA9PT0gJ29iamVjdCcpOwogICAgdGVzdGVyLmFzc2VydCh0eXBlb2Yg
ZnVuY3Rpb24oKSB7fSA9PT0gJ2Z1bmN0aW9uJyk7CiAgICB0ZXN0ZXIuYXNzZXJ0KHR5cGVvZiBT
eW1ib2woKSA9PT0gJ3N5bWJvbCcpOwogICAgdGVzdGVyLmFzc2VydCh0eXBlb2YgMTIzbiA9PT0g
J2JpZ2ludCcpOwp9KTsKCnRlc3Rlci50ZXN0KCdpbnN0YW5jZW9mIG9wZXJhdG9yJywgKCkgPT4g
ewogICAgdGVzdGVyLmFzc2VydChbXSBpbnN0YW5jZW9mIEFycmF5KTsKICAgIHRlc3Rlci5hc3Nl
cnQoe30gaW5zdGFuY2VvZiBPYmplY3QpOwogICAgdGVzdGVyLmFzc2VydChuZXcgRGF0ZSgpIGlu
c3RhbmNlb2YgRGF0ZSk7CiAgICAKICAgIGZ1bmN0aW9uIFBlcnNvbigpIHt9CiAgICBjb25zdCBq
b2huID0gbmV3IFBlcnNvbigpOwogICAgdGVzdGVyLmFzc2VydChqb2huIGluc3RhbmNlb2YgUGVy
c29uKTsKICAgIHRlc3Rlci5hc3NlcnQoam9obiBpbnN0YW5jZW9mIE9iamVjdCk7Cn0pOwoKdGVz
dGVyLnRlc3QoJ2luIG9wZXJhdG9yJywgKCkgPT4gewogICAgY29uc3Qgb2JqID0geyBhOiAxLCBi
OiAyIH07CiAgICB0ZXN0ZXIuYXNzZXJ0KCdhJyBpbiBvYmopOwogICAgdGVzdGVyLmFzc2VydCgn
dG9TdHJpbmcnIGluIG9iaik7IC8vIEluaGVyaXRlZCBwcm9wZXJ0eQogICAgCiAgICBjb25zdCBh
cnIgPSBbMSwgMiwgM107CiAgICB0ZXN0ZXIuYXNzZXJ0KDAgaW4gYXJyKTsgLy8gSW5kZXggZXhp
c3RzCiAgICB0ZXN0ZXIuYXNzZXJ0KCEzIGluIGFycik7IC8vIEluZGV4IGRvZXNuJ3QgZXhpc3QK
fSk7Cgp0ZXN0ZXIudGVzdCgnb3B0aW9uYWwgY2hhaW5pbmcnLCAoKSA9PiB7CiAgICBjb25zdCBv
YmogPSB7IHVzZXI6IHsgbmFtZTogJ0pvaG4nIH0gfTsKICAgIHRlc3Rlci5hc3NlcnQob2JqLnVz
ZXI/Lm5hbWUgPT09ICdKb2huJyk7CiAgICB0ZXN0ZXIuYXNzZXJ0KG9iai5hZGRyZXNzPy5zdHJl
ZXQgPT09IHVuZGVmaW5lZCk7CiAgICAKICAgIC8vIFdpdGggZnVuY3Rpb24gY2FsbHMKICAgIGNv
bnN0IGFwaSA9IHsgZ2V0RGF0YTogKCkgPT4gJ2RhdGEnIH07CiAgICB0ZXN0ZXIuYXNzZXJ0KGFw
aS5nZXREYXRhPy4oKSA9PT0gJ2RhdGEnKTsKICAgIHRlc3Rlci5hc3NlcnQoYXBpLm5vbkV4aXN0
ZW50TWV0aG9kPy4oKSA9PT0gdW5kZWZpbmVkKTsKfSk7Cgp0ZXN0ZXIudGVzdCgnbnVsbGlzaCBj
b2FsZXNjaW5nJywgKCkgPT4gewogICAgdGVzdGVyLmFzc2VydCgobnVsbCA/PyAnZGVmYXVsdCcp
ID09PSAnZGVmYXVsdCcpOwogICAgdGVzdGVyLmFzc2VydCgodW5kZWZpbmVkID8/ICdkZWZhdWx0
JykgPT09ICdkZWZhdWx0Jyk7CiAgICB0ZXN0ZXIuYXNzZXJ0KCgwID8/ICdkZWZhdWx0JykgPT09
IDApOwogICAgdGVzdGVyLmFzc2VydCgoJycgPz8gJ2RlZmF1bHQnKSA9PT0gJycpOwogICAgdGVz
dGVyLmFzc2VydCgoZmFsc2UgPz8gJ2RlZmF1bHQnKSA9PT0gZmFsc2UpOwp9KTsKCi8vID09PT09
PT09PT0gUlVOIEFMTCBURVNUUyA9PT09PT09PT09CnRlc3Rlci5ydW4oKTsK
